> Original Source: kiro_01/specs/task-calendar-view/TESTING_GUIDE.md

# Calendar View Testing Guide

## Quick Start

This guide provides step-by-step instructions for testing the Task Calendar View feature across different browsers and devices.

## Automated Browser Compatibility Check

### Using the Browser Test Script

1. Open the application in your target browser
2. Navigate to the dashboard (login if needed)
3. Open Browser DevTools:
   - **Chrome/Edge:** Press `F12` or `Ctrl+Shift+I` (Windows) / `Cmd+Option+I` (Mac)
   - **Firefox:** Press `F12` or `Ctrl+Shift+I` (Windows) / `Cmd+Option+I` (Mac)
   - **Safari:** Enable Developer menu in Preferences, then press `Cmd+Option+I`
4. Go to the **Console** tab
5. Copy the contents of `browser-test-script.js`
6. Paste into the console and press Enter
7. Review the test results

The script will automatically detect your browser and run compatibility tests.

## Manual Testing Procedures

### Desktop Browser Testing

#### Chrome Testing

1. **Open Application**
   - Navigate to the application URL
   - Login with test credentials
   - Verify dashboard loads correctly

2. **Test Calendar Button**
   - Locate the calendar icon button next to "Pending Tasks"
   - Verify button is visible and has a calendar icon
   - Click the button
   - Verify modal opens smoothly with animation

3. **Test Calendar Display**
   - Verify calendar shows current month and year
   - Verify 7 columns (Sun-Sat) are displayed
   - Verify today's date is highlighted
   - Verify dates from adjacent months are muted
   - Verify tasks appear on their deadline dates

4. **Test Navigation**
   - Click previous month button (◀)
   - Verify calendar shows previous month
   - Verify header updates
   - Click next month button (▶)
   - Verify calendar shows next month
   - Try keyboard shortcuts: `Ctrl+Left Arrow` and `Ctrl+Right Arrow`

5. **Test Task Display**
   - Verify tasks show title and type badge
   - Verify overdue tasks are red
   - Verify task count indicator appears
   - Verify "+N more" shows for cells with >3 tasks
   - Click on a task
   - Verify task details modal opens
   - Verify all task fields are displayed

6. **Test Modal Closing**
   - Press `Escape` key → modal should close
   - Reopen modal
   - Click outside modal (on overlay) → modal should close
   - Reopen modal
   - Click X button → modal should close

7. **Test Keyboard Navigation**
   - Open modal
   - Press `Tab` key repeatedly
   - Verify focus moves through: prev button → next button → close button → tasks
   - Verify focus stays within modal (focus trap)
   - Press `Shift+Tab` to go backwards
   - Verify focus order is logical

8. **Test Responsive Behavior**
   - Open DevTools
   - Toggle device toolbar (Ctrl+Shift+M)
   - Test at widths: 320px, 375px, 768px, 1024px, 1920px
   - Verify layout adapts appropriately

#### Firefox Testing

Follow the same steps as Chrome, but pay special attention to:
- Focus outline visibility (Firefox may show different outlines)
- Animation smoothness
- Font rendering differences
- Scrollbar appearance

#### Safari Testing (macOS)

Follow the same steps as Chrome, but pay special attention to:
- Date parsing (Safari is strict about date formats)
- Modal backdrop rendering
- Animation performance
- Focus management
- Keyboard navigation

**Safari-Specific Tests:**
1. Test with various date formats in tasks
2. Verify Firestore Timestamp conversion works
3. Test focus trap with Tab key
4. Verify animations are smooth

#### Edge Testing

Follow the same steps as Chrome. Edge (Chromium) should behave identically to Chrome, but verify:
- All features work as expected
- No Edge-specific rendering issues
- Keyboard shortcuts work

### Mobile Browser Testing

#### iOS Safari Testing

**Required:** Physical iPhone or iPad (iOS 14+)

1. **Initial Setup**
   - Open Safari on iOS device
   - Navigate to application URL
   - Login with test credentials

2. **Test Calendar Button**
   - Tap the calendar icon button
   - Verify modal opens
   - Verify modal takes up appropriate screen space
   - Verify content is not cut off

3. **Test Touch Interactions**
   - Tap previous/next month buttons
   - Verify buttons respond to touch
   - Verify touch targets are large enough (no accidental taps)
   - Tap on tasks
   - Verify task details open

4. **Test Scrolling**
   - If calendar has many tasks, verify scrolling works
   - Verify no horizontal scrolling required
   - Verify smooth scrolling

5. **Test Modal Closing**
   - Tap outside modal → should close
   - Reopen modal
   - Tap X button → should close

6. **Test Orientation Changes**
   - Test in portrait orientation
   - Rotate to landscape
   - Verify layout adapts
   - Verify no content is cut off

7. **Test with Virtual Keyboard**
   - If any input fields are present, tap them
   - Verify keyboard doesn't cover important content
   - Verify modal is scrollable with keyboard open

8. **Test Pinch-to-Zoom**
   - Try pinching to zoom on calendar
   - Note: May be disabled by viewport meta tag
   - Verify this doesn't break layout

9. **Test Performance**
   - Note any lag or jank
   - Verify animations are smooth
   - Verify month navigation is responsive

**iOS-Specific Issues to Watch For:**
- Focus management may behave differently
- Virtual keyboard may cover content
- Touch targets must be 44x44px minimum
- Hover states don't work (expected)

#### Chrome for Android Testing

**Required:** Physical Android device or emulator

1. **Initial Setup**
   - Open Chrome on Android device
   - Navigate to application URL
   - Login with test credentials

2. **Test Calendar Button**
   - Tap the calendar icon button
   - Verify modal opens
   - Verify modal fits screen

3. **Test Touch Interactions**
   - Tap all interactive elements
   - Verify touch targets are adequate
   - Verify no accidental touches
   - Test task tapping
   - Verify task details open

4. **Test Navigation**
   - Tap previous/next month buttons
   - Verify smooth navigation
   - Verify header updates

5. **Test Scrolling**
   - Verify scrolling is smooth
   - Verify no horizontal scrolling
   - Test overscroll behavior

6. **Test Modal Closing**
   - Tap outside modal
   - Tap X button
   - Verify modal closes properly

7. **Test Orientation**
   - Test portrait and landscape
   - Verify layout adapts

8. **Test Performance**
   - Note any performance issues
   - Verify animations are smooth

**Android-Specific Issues to Watch For:**
- Different Android versions may behave differently
- Samsung Internet browser may have differences
- Virtual keyboard behavior
- Back button behavior

### Accessibility Testing

#### Screen Reader Testing

**NVDA (Windows) / JAWS (Windows)**

1. Start screen reader
2. Navigate to application
3. Tab to calendar button
4. Verify button is announced with label
5. Activate button (Enter or Space)
6. Verify modal opening is announced
7. Verify modal title is announced
8. Tab through modal elements
9. Verify each element is announced correctly
10. Navigate to calendar cells
11. Verify date and task count are announced
12. Navigate to tasks
13. Verify task information is announced
14. Press Escape
15. Verify modal closing is announced

**VoiceOver (macOS/iOS)**

1. Enable VoiceOver (Cmd+F5 on Mac)
2. Navigate to calendar button
3. Verify button is announced
4. Activate button
5. Verify modal is announced
6. Navigate through modal
7. Verify all elements are accessible
8. Test on iOS device as well

**TalkBack (Android)**

1. Enable TalkBack in Settings
2. Navigate to application
3. Test calendar button
4. Test modal navigation
5. Verify all elements are accessible

#### Keyboard-Only Testing

1. **Navigate to Application**
   - Use Tab key only (no mouse)
   - Navigate to calendar button
   - Press Enter to open

2. **Navigate Modal**
   - Tab through all interactive elements
   - Verify focus is visible
   - Verify focus order is logical
   - Verify focus stays in modal (focus trap)

3. **Test Keyboard Shortcuts**
   - Press Escape → modal closes
   - Reopen modal
   - Press Ctrl+Left Arrow → previous month
   - Press Ctrl+Right Arrow → next month

4. **Test Task Interaction**
   - Tab to a task
   - Press Enter or Space → task details open
   - Tab through task details
   - Press Escape → task details close

#### Focus Visibility Testing

1. Open calendar modal
2. Tab through all elements
3. Verify focus indicator is visible on each element
4. Verify focus indicator has sufficient contrast
5. Verify focus indicator is not obscured

### Performance Testing

#### Desktop Performance

1. **Open DevTools Performance Tab**
   - Chrome: F12 → Performance tab
   - Record performance while opening calendar
   - Stop recording
   - Analyze:
     - Time to open modal (<500ms ideal)
     - Animation frame rate (60fps ideal)
     - JavaScript execution time
     - Layout/paint time

2. **Test with Many Tasks**
   - Add 50+ tasks to calendar
   - Open calendar
   - Verify performance is acceptable
   - Test month navigation
   - Verify no lag or jank

#### Mobile Performance

1. **Test on Low-End Device**
   - Use older device if available
   - Test calendar opening
   - Test month navigation
   - Test scrolling
   - Note any performance issues

2. **Monitor Memory Usage**
   - Use browser DevTools (if available)
   - Monitor memory while using calendar
   - Verify no memory leaks
   - Close and reopen calendar multiple times

### Visual Regression Testing

#### Manual Visual Inspection

1. **Compare Across Browsers**
   - Take screenshots in each browser
   - Compare side-by-side
   - Note any visual differences
   - Verify differences are acceptable

2. **Check Responsive Breakpoints**
   - Test at exact breakpoint widths (767px, 768px)
   - Verify smooth transitions
   - Verify no layout breaks

3. **Check Dark Mode (if applicable)**
   - Enable system dark mode
   - Verify calendar displays correctly
   - Verify colors have sufficient contrast

## Common Issues and Solutions

### Issue: Modal doesn't open
**Possible Causes:**
- JavaScript error
- CalendarView not initialized
- Button event listener not attached

**Solution:**
- Check browser console for errors
- Verify CalendarView.init() is called
- Verify button exists in DOM

### Issue: Tasks don't appear
**Possible Causes:**
- No tasks with deadlines in current month
- Task filtering issue
- Date parsing error

**Solution:**
- Check if tasks exist in App.currentTasks
- Verify tasks have valid deadline dates
- Check console for date parsing warnings

### Issue: Focus trap doesn't work
**Possible Causes:**
- Browser-specific focus behavior
- Event listener not attached
- Focusable elements not detected

**Solution:**
- Verify focus trap event listener is attached
- Test with different browsers
- Check focusable element selector

### Issue: Modal height issues on mobile
**Possible Causes:**
- Virtual keyboard covering content
- Viewport height calculation
- CSS vh units behaving differently

**Solution:**
- Test with virtual keyboard open
- Consider using dvh units
- Add JavaScript-based height calculation

### Issue: Touch targets too small
**Possible Causes:**
- CSS not applying correctly
- Viewport scaling issue

**Solution:**
- Verify min-width and min-height are 44px
- Check viewport meta tag
- Test on actual device

## Test Result Documentation

### Template for Recording Results

```
Browser: [Chrome/Firefox/Safari/Edge]
Version: [Browser version]
OS: [Windows/macOS/Linux]
Date: [Test date]
Tester: [Your name]

Visual Tests:
- [ ] Modal opens correctly
- [ ] Calendar grid displays correctly
- [ ] Tasks appear on correct dates
- [ ] Styling is correct

Functional Tests:
- [ ] Button opens modal
- [ ] Navigation works
- [ ] Tasks are clickable
- [ ] Modal closes correctly

Responsive Tests:
- [ ] Layout adapts to screen size
- [ ] Touch targets are adequate (mobile)
- [ ] No horizontal scrolling

Accessibility Tests:
- [ ] Keyboard navigation works
- [ ] Focus trap works
- [ ] Screen reader compatible
- [ ] ARIA labels present

Performance Tests:
- [ ] Modal opens quickly
- [ ] Animations are smooth
- [ ] No lag or jank

Issues Found:
[List any issues discovered]

Notes:
[Additional observations]
```

## Reporting Issues

When reporting issues, include:
1. Browser name and version
2. Operating system
3. Device (if mobile)
4. Steps to reproduce
5. Expected behavior
6. Actual behavior
7. Screenshots or video (if applicable)
8. Console errors (if any)

## Next Steps

After completing testing:
1. Document all results in CROSS_BROWSER_TESTING.md
2. Create issues for any bugs found
3. Prioritize fixes based on severity
4. Retest after fixes are implemented
5. Update documentation with any workarounds

## Resources

- [MDN Browser Compatibility](https://developer.mozilla.org/en-US/docs/Web/Guide/Browser_compatibility)
- [Can I Use](https://caniuse.com/) - Browser support tables
- [BrowserStack](https://www.browserstack.com/) - Cross-browser testing platform
- [WebAIM](https://webaim.org/) - Accessibility resources
- [WCAG Guidelines](https://www.w3.org/WAI/WCAG21/quickref/) - Accessibility standards
